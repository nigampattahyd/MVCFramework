@model CRMHub.ViewModel.ProjectModel
@{
    ViewBag.Title = "CreateProject";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<h2>CreateProject</h2>*@
@using (Html.BeginForm("AddProject", "Project", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div id="content-wrapper">
        <div id="CustomBootstrapAlertBox">
        </div>
        <div class="row">

            <script>
                //init.push(function () {
                //    $('ul.bs-tabdrop-example').tabdrop();
                //});
            </script>
            <div class="panel">
                <div class="panel-heading">
                    <div class="row">
                        <!-- Page header, center on small screens -->
                        <h1 class="col-xs-6 col-sm-4 text-left text-left-sm panel-title"><i class="fa fa-users page-header-icon"></i>&nbsp; Create New Project </h1>
                        <div class="col-xs-6 col-sm-8">
                            <div class="row">
                                <div class="pull-right">
                                    @*<a href="#" class="btn btn-flat btn-labeled btn-primary" tabindex="-1"
                                        data-toggle="modal" data-target="#uidemo-modals-alerts-info"><span class="btn-label icon fa fa-question-circle"></span>Help</a>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-body">

                    @*<div class="row">*@
                    <div class="row" style="text-align:right;">

                        <div class="table-nav-item" style="float: right; margin-bottom:15px;">
                            <ul class="table-nav-item" style="float: right; margin-bottom:5px;">
                                <li>
                                    <button class="btn btn-flat btn-labeled btn-primary" id="btnSave">
                                        <span class="btn-label icon fa fa-save"></span>Save
                                    </button>
                                </li>
                                <li>
                                    <a style="color: #fff; text-decoration: none; padding: 0px; font-weight: normal" class="btn btn-flat btn-labeled btn-primary" href="@Url.Action("Index", "Project")">
                                        <span class="btn-label icon fa fa-backward" style="margin-right:6px;"> </span>
                                        Back
                                    </a>
                                </li>
                            </ul>
                        </div>


                        @*<div class="page-header-breadcrumb" style="float:right;">
                            <label id="Label1" class="control-label">
                                <asp:Label ID="lblMessage" runat="server" Font-Bold="true" ForeColor="red" Visible="false"></asp:Label>
                            </label>


                            <button class="btn btn-flat btn-labeled btn-primary" id="btnSave" style=" margin:0px 3px 0px 10px;">
                                <span class="btn-label icon fa fa-save"></span>Save
                            </button>

                            
                            <a style="color: #fff; text-decoration: none; padding: 0px; font-weight: normal" class="btn btn-flat btn-labeled btn-primary" href="@Url.Action("Index", "Project")">
                                <span class="btn-label icon fa fa-backward" style="margin-right:6px;"> </span>
                                Back
                            </a>


                        </div>*@

                    </div>
                    <div class="form-group">
                        <label class="control-label">
                            <asp:Label ID="lblMessage" runat="server" ForeColor="Red"></asp:Label>
                        </label>
                        <span id="errorsymbol" style="color:red;display:none;margin-left:6px;" class="fa fa-exclamation-circle">
                        </span>
                        <div id="ErrorMessages" style="margin-left:30px;color:red;font-size:15px;margin-top:-19px">
                        </div>
                    </div>                   
                    <div class="row">

                       
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="panel-group" id="accordion-example">
                                            <!-- / .panel -->
                                            <div class="panel">
                                                <div class="panel-heading">
                                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-example"
                                                       href="#collapse2">Project Details</a>
                                                </div>
                                                <!-- / .panel-heading -->
                                                <div id="collapse2" class="panel-collapse collapse in" style="height: auto;">
                                                    <div class="panel-body">
                                                        <div class="col-sm-12 no-padding-hr">
                                                            <div class="row">

                                                                <div class="col-sm-6">
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group no-margin-hr">
                                                                            <label class="control-label col-sm-4">Project Name :<span style="color: red">*</span></label>
                                                                            <div class="col-sm-8">
                                                                                @*<input type="text" class="form-control" />*@
                                                                                @Html.TextBoxFor(m => m.ProjectDetails.Projectname, new { @class = "form-control input-sm", @id = "txtProjectname", @validate = "Required", @data_val_required = "Project Name" })
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group no-margin-hr">
                                                                            <label class="control-label col-sm-4">Contact :<span style="color: red">*</span></label>
                                                                            <div class="col-sm-8">
                                                                               
                                                                                <div class="input-group">
                                                                                    @Html.TextBoxFor(m => m.ProjectDetails.ContactName, new { @id = "HyperContact", @class = "form-control input-sm", @maxlength = "30", @validate = "Required", @data_val_required = "Contact", @readonly = true })


                                                                                    @*<span class="input-group-addon" type=" button" style="cursor:pointer;" onclick="return show_NewAccountPopUp(750, 450);">*@
                                                                                    <span class="input-group-btn">
                                                                                        <i class="fa fa-search"></i>
                                                                                        <button class="btn fa fa-search inputTextButton" type="button" id="ImageButton4" title="Select Contact"
                                                                                                onclick="return show_NewContactPopUp(580, 420);"></button>
                                                                                        @Html.HiddenFor(m => m.ProjectDetails.Contact, new { @id = "hdParentContactId" })
                                                                                        @*@Html.HiddenFor(m => m.ProjectDetails.Contact, new { @id = "hdParentAccountId" })*@
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                            @*@Html.TextBoxFor(m => m.MenusEntity.MenuDescription, new { @class = "form-control input-sm", @id = "txtMenuDescription" })*@
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group no-margin-hr">
                                                                            <label class="control-label col-sm-4">URL :</label>
                                                                            <div class="col-sm-8">
                                                                                @*<input type="text" class="form-control" />*@
                                                                                @Html.TextBoxFor(m => m.ProjectDetails.URL, new { @class = "form-control input-sm", @id = "txtURL" })
                                                                            </div>

                                                                            @*@Html.TextBoxFor(m => m.MenusEntity.NavigateURL, new { @class = "form-control input-sm", @id = "txtNavigateURL" })*@
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group no-margin-hr">
                                                                            <label class="control-label col-sm-4">Status :</label>
                                                                            <div class="col-sm-8">
                                                                                @*<div class="form-group no-margin-hr">
                                                                                    <label class="control-label">Status :</label>*@
                                                                                @Html.DropDownListFor(m => m.ProjectDetails.Status, new List<SelectListItem>
                                                                    {
                                                                        new SelectListItem { Text = "Select", Value = "0", Selected=true},
                                                                    new SelectListItem { Text = "In Progress", Value = "InProgress"},
                                                                    new SelectListItem { Text = "Not Started", Value = "NotStarted"},
                                                                    new SelectListItem { Text = "Completed", Value = "Completed"},
                                                                     new SelectListItem { Text = "Open", Value = "Open", },
                                                                    new SelectListItem { Text = "Deferred", Value = "Deferred"},
                                                                    new SelectListItem { Text = "Cancelled", Value = "Cancelled"}

                                                                    }, new { id = "ddl_Status", @class = "form-control input-sm", @TabIndex = "13" })


                                                                            </div>
                                                                            @*<input type="text" class="form-control" />*@
                                                                            @*</div>*@
                                                                            @*@Html.DropDownListFor(m => m.MenusEntity.ParentMenuId, new SelectList(Model.MenusList, "MenuId", "MenuDescription"), "Select", new { @class = "form-control input-sm", @id = "ddlIParentmenu" })*@
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-sm-12">

                                                                <div class="form-group no-margin-hr col-sm-12">
                                                                    <label class="control-label col-sm-2">Description :</label>
                                                                    <div class="col-sm-10">
                                                                        @Html.TextAreaFor(m => m.ProjectDetails.Description, new { @id = "txtDescription", @class = "textEditor" })
                                                                        @*@Html.TextArea("txtyy", "", new { @id = "txtDescription", @class = "textEditor" })*@
                                                                    </div>

                                                                    @*<label class="control-label">Description :</label>
                                                                        <input type="text" class="textEditor" />*@
                                                                    @*<div class="panel-body">
                                                                            @Html.TextAreaFor(m => m.Contact.Description, new { @id = "txtDescription", @class = "textEditor" })
                                                                        </div>*@

                                                                    @*@Html.TextAreaFor("myTextArea", "", new { @class = "textEditor" ,id="txtprojdescrption"})*@
                                                                    @*<div summernotemain>
                                                                            <div revisiondescrp>
                                                                            </div>
                                                                        </div>*@
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                           
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

                    <h4 class="modal-title">Contact List</h4>
                </div>
                <div class="modal-body">

                    <div class="row">
                        <div style="text-align:left;font-size:12px;padding:5px">Note : Click Contact Name To Select Record.</div>
                        <div class="col-sm-12">

                            <div class="table-primary table-striped" id="tblContactList">

                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
}
<script>

    //$('#btnSave').click(function () {








    //})
    $(document).ready(function () {
       // show_NewContactPopUp();
    })

    function show_NewContactPopUp() {
      
      //  $('#loading').css('display', 'block');
        var companyid ='0';
     //   if (companyid != "") {
            $.ajax({
                url: '@Url.Action("GetContactListforProjects", "ManageCompany")', //"ManageCompany/ListContactforactivity"ListContacts,
                type: "GET",
                async: false,
                data: { companyid: companyid },
                success: function (data) {
                    if (data != null) {
                        $('#tblContactList').empty();
                        $('#tblContactList').append(data);
                    }
                },
                error: function (n, y, p) {
                    alert("error");
                }
            });
            $('#myModal').modal("show");
    //    }
        //else {
        //    alert("Please Select Company !!!!!!");
        //    $('#loading').css('display', 'none');
        //    $('#HyperAccountList').css('border', '1px solid red');

        //}

    }
    $(".textEditor").jqte();



    $('#btnSave').click(function () {

        var Projectname = $("#txtProjectname").val();
      

        if (Projectname == '' ) {
            $('#txtProjectname').css('border-color', 'red');
          
          
            Isvalid = false;
        }
        return Validate(this.form);
    });
    //    $('[revisiondescrp]').summernote({
    //        height: 250,
    //        focus: false,
    //        tabsize: 2,
    //        toolbar: [
    //['style', ['bold', 'italic', 'underline', 'clear']],
    //['color', ['color']],
    //        ]
    //    });
</script>